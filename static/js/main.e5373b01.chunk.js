(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{17:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s}));var r=n(27),c=function(t){return t.auth.isLoggedIn},a=function(t){return t.auth.user.name},u=function(t){return t.auth.isFetchingCurrentUser},s=Object(r.a)([function(t){return t.filter},function(t){return t.contacts.items}],(function(t,e){var n=t.toLowerCase();return n?e.filter((function(t){return t.name.toLowerCase().includes(n)})):e}))},25:function(t,e,n){"use strict";n.d(e,"e",(function(){return j})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return h}));var r,c=n(6),a=n(3),u=n.n(a),s=n(14),i=n(8),o=n(16),l=n.n(o);l.a.defaults.baseURL="http://connections-api.herokuapp.com";var b=function(t){l.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){l.a.defaults.headers.common.Authorization=""},j=Object(i.b)("auth/register",function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/users/signup",e);case 3:return n=t.sent,r=n.data,b(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),f=Object(i.b)("auth/login",function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/users/login",e);case 3:return n=t.sent,r=n.data,b(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),p=Object(i.b)("auth/logout",Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("/users/logout");case 3:d(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),h=Object(i.b)("auth/refresh",function(){var t=Object(s.a)(u.a.mark((function t(e,n){var r,c,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return b(c),t.prev=5,t.next=8,l.a.get("/users/current");case 8:return a=t.sent,s=a.data,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),O=Object(i.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(r={},Object(c.a)(r,j.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(c.a)(r,f.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(c.a)(r,p.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(c.a)(r,h.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(c.a)(r,h.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(c.a)(r,h.rejected,(function(t){t.isFetchingCurrentUser=!1})),r)});e.a=O.reducer},34:function(t,e,n){"use strict";n.d(e,"d",(function(){return x})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return g}));var r,c=n(6),a=n(46),u=n(3),s=n.n(u),i=n(14),o=n(8),l=n(16),b=n.n(l);function d(){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/contacts");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/contacts",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.delete("/contacts/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}b.a.defaults.baseURL="https://connections-api.herokuapp.com";var x=Object(o.b)("contacts/fetchAllContacts",Object(i.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),v=Object(o.b)("contacts/createContact",function(){var t=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),g=Object(o.b)("contacts/deleteContact",function(){var t=Object(i.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m=Object(o.c)({name:"contacts",initialState:{items:[],status:null,error:null},extraReducers:(r={},Object(c.a)(r,x.fulfilled,(function(t,e){t.items=e.payload,t.status=null,t.error=null})),Object(c.a)(r,x.pending,(function(t,e){t.status="loading"})),Object(c.a)(r,x.rejected,(function(t,e){t.status=null,t.error="error"})),Object(c.a)(r,v.fulfilled,(function(t,e){t.items=[].concat(Object(a.a)(t.items),[e.payload]),t.status=null,t.error=null})),Object(c.a)(r,v.pending,(function(t,e){t.status="loading",t.error="error"})),Object(c.a)(r,v.rejected,(function(t,e){t.status=null,t.error="error"})),Object(c.a)(r,g.fulfilled,(function(t,e){t.items=t.items.filter((function(t){return console.log("payload",e.payload,t.id),t.id!==e.payload})),t.status=null,t.error=null})),Object(c.a)(r,g.pending,(function(t,e){t.status="loading",t.error="error"})),Object(c.a)(r,g.rejected,(function(t,e){t.status=null,t.error="error"})),r)});e.b=m.reducer},79:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(22),u=n.n(a),s=n(9),i=n(43),o=n(19),l=n(4),b=n(25),d=n(17),j=n(2);var f=function(){var t=Object(s.c)(d.c);return Object(j.jsxs)("nav",{children:[Object(j.jsx)(o.b,{to:"/",exact:!0,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),t&&Object(j.jsx)(o.b,{to:"/contacts",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})};var p=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(o.b,{to:"/register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(o.b,{to:"/login",children:"\u041b\u043e\u0433\u0438\u043d"})]})},h=n(94);var O=function(){var t=Object(s.c)(d.d),e=Object(s.b)();return Object(j.jsxs)("div",{children:[Object(j.jsxs)("span",{style:{marginRight:"30px",fontSize:"16px"},children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",t]}),Object(j.jsx)(h.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){return e(Object(b.d)())},children:"\u0412\u044b\u0439\u0442\u0438"})]})};var x=function(){var t=Object(s.c)(d.c);return Object(j.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#858f9a",padding:"10px"},children:[Object(j.jsx)("div",{children:Object(j.jsx)(f,{})}),Object(j.jsx)("div",{children:t?Object(j.jsx)(O,{}):Object(j.jsx)(p,{})})]})},v=n(26),g=n(30),m=["children","restricted"];var k=function(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=Object(g.a)(t,m),a=Object(s.c)(d.c)&&r;return Object(j.jsx)(l.b,Object(v.a)(Object(v.a)({},c),{},{children:a?Object(j.jsx)(l.a,{to:"/contacts"}):e}))},y=["children"];var w=function(t){var e=t.children,n=Object(g.a)(t,y),r=Object(s.c)(d.c);return Object(j.jsx)(l.b,Object(v.a)(Object(v.a)({},n),{},{children:r?e:Object(j.jsx)(l.a,{to:"/login"})}))},C=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,98))})),L=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,99))})),z=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,100))})),I=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,101))}));var S=function(){var t=Object(s.b)();return Object(r.useEffect)((function(){t(Object(b.b)())}),[t]),!Object(s.c)(d.b)&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(x,{}),Object(j.jsx)(l.d,{children:Object(j.jsxs)(r.Suspense,{fallback:"dsadsa",children:[Object(j.jsx)(k,{path:"/",exact:!0,children:Object(j.jsx)(C,{})}),Object(j.jsx)(k,{path:"/register",restricted:!0,children:Object(j.jsx)(L,{})}),Object(j.jsx)(k,{path:"/login",restricted:!0,children:Object(j.jsx)(z,{})}),Object(j.jsx)(w,{path:"/contacts",children:Object(j.jsx)(I,{})})]})})]})},U=n(8),F=n(45),R=n.n(F),A=n(34),B=Object(U.c)({name:"filter",initialState:"",reducers:{filter:function(t,e){return e.payload}}}),E=(B.actions.filter,B.reducer),J=n(21),M={key:"auth",storage:R.a,whitelist:["token"]},V=Object(U.a)({reducer:{auth:Object(J.g)(M,b.a),contacts:A.b,filter:E},middleware:function(t){return t({serializableCheck:{ignoredActions:[J.a,J.f,J.b,J.c,J.d,J.e]}})}}),W=Object(J.h)(V);u.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(s.a,{store:V,children:Object(j.jsx)(i.a,{loading:null,persistor:W,children:Object(j.jsx)(o.a,{children:Object(j.jsx)(S,{})})})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.e5373b01.chunk.js.map